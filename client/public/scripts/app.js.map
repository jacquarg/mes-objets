{"version":3,"file":"public/scripts/app.js","sources":["app/application.coffee","app/collections/receipt.coffee","app/collections/receiptdetails.coffee","app/collections/receipts.coffee","app/collections/sections.coffee","app/collections/transactions.coffee","app/initialize.coffee","app/models/receipt.coffee","app/models/receiptdetail.coffee","app/models/section.coffee","app/models/transaction.coffee","app/router.coffee","app/templates/app.jade","app/templates/modal_step1.jade","app/templates/preview.jade","app/templates/transaction.jade","app/views/app.coffee","app/views/modal_step1.coffee","app/views/preview.coffee","app/views/transaction.coffee"],"names":[],"mappings":"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","sourcesContent":["module.exports = initialize: ->\n  Router = require(\"router\")\n  @router = new Router()\n  Backbone.history.start()\n  return\n","","ReceiptDetail = require(\"../models/receiptdetail\")\nmodule.exports = ReceiptDetails = Backbone.Collection.extend(\n  model: ReceiptDetail\n  url: \"receiptdetails\"\n  seed: ->\n    console.log \"receipt seeding :D\"\n    @create\n      id: \"123\"\n      barcode: \"1234567890\"\n\n    return\n)\n","Receipt = require(\"../models/receipt\")\nmodule.exports = Receipts = Backbone.Collection.extend(\n  model: Receipt\n  url: \"receipts\"\n)\n","Section = require(\"../models/section\")\nmodule.exports = Sections = Backbone.Collection.extend(\n  initialize: (models, options) ->\n    @receiptId = options.receiptId\n    return\n\n  url: ->\n    \"receipts/\" + @receiptId + \"/sections\"\n\n  model: Section\n)\n","Transaction = require(\"../models/transaction\")\nmodule.exports = Transactions = Backbone.Collection.extend(\n  model: Transaction\n  url: \"transactions\"\n)\n\n# seed: function(){\n#     // not working\n#     console.log('seeding!')\n#     this.create({\n#         id:\"1231512512341512412\",\n#         title: \"Pelle à picous\",\n#         comment: \"Très belle pelle\",\n#         trace: [\n#                 \"intermarché\"\n#             ],\n#         category: [\n#             \"Bricolage\",\n#             \"Pelle\",\n#             \"Pelle à picous\"\n#         ],\n#         barcode: \"1248193523\",\n#         url: \"http://pelle-a-picous.love\"\n#     });\n# }\n","# The function called from index.html\n$(document).ready ->\n  app = require(\"application\")\n  app.initialize()\n  $(document).foundation()\n\nwindow.reinitilizeLocalValues = ->\n  window.local =\n    selectedTicket: `undefined`\n    selectedItem: `undefined`\n    selectedItemId: `undefined`\n\n  $(\".dynOption option\").remove()\n  $(\".dynOption\").append \"<option class=\\\"option_placeholder\\\">- Choisissez une option -<option>\"\n\nreinitilizeLocalValues()\nwindow.prettyDate = (rawDate) ->\n  d = new Date(rawDate)\n  jour = d.getDate()\n  mois = d.getMonth()\n  annee = d.getFullYear()\n  heure = d.getHours()\n  minute = d.getMinutes()\n  minute = \"0\" + minute  if minute < 10\n  jour = \"0\" + jour  if jour < 10\n  switch mois\n    when 0 then mois = \"Jan\"\n    when 1 then mois = \"Fev\"\n    when 2 then mois = \"Mar\"\n    when 3 then mois = \"Avr\"\n    when 4 then mois = \"Mai\"\n    when 5 then mois = \"Jun\"\n    when 6 then mois = \"Jui\"\n    when 7 then mois = \"Aou\"\n    when 8 then mois = \"Sep\"\n    when 9 then mois = \"Oct\"\n    when 10 then mois = \"Nov\"\n    when 11 then mois = \"Dec\"\n  return jour + \"-\" + mois + \"-\" + annee + \", \" + heure + \":\" + minute\n\nString::upAndDownCase = ->\n  @charAt(0).toUpperCase() + @slice(1).toLowerCase()\n\nwindow.listToReorder = (listToReorder, listitems) ->\n  listitems.sort (a, b) ->\n    $(a).text().toUpperCase().localeCompare $(b).text().toUpperCase()\n\n  $.each listitems, (idx, itm) ->\n    listToReorder.append itm\n    return\n\n  return\n\n","module.exports = Receipt = Backbone.Model.extend({})\n","module.exports = ReceiptDetail = Backbone.Model.extend({})\n","module.exports = Section = Backbone.Model.extend({})\n","module.exports = Transaction = Backbone.Model.extend({})\n","AppView = require(\"views/app\")\nTransactionCollection = require(\"collections/transactions\")\nReceiptDetailCollection = require(\"collections/receiptdetails\")\ntransactions = new TransactionCollection()\nreceiptdetails = new ReceiptDetailCollection()\nmodule.exports = Router = Backbone.Router.extend(\n  routes:\n    \"\": \"main\"\n\n  main: ->\n    mainView = new AppView(\n      collection: transactions\n      receiptcollection: receiptdetails\n    )\n    mainView.render()\n    return\n)","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"row\"><div class=\"large-8 columns\"><h1>Transactions Tracker</h1><p>This application will help you manage your transactions!</p></div><div id=\"menu\" class=\"large-4 columns\"><a id=\"addtransacbutton\" href=\"#\" data-reveal-id=\"step1\" class=\"success radius button\">Ajouter une transaction</a></div></div><div class=\"row\"><table><thead><tr><th width=\"100%\">Title</th><th>Categories</th><th>Barcode</th><th>URL</th><th>Traces</th><th>Comments</th><th>Action</th></tr></thead><tbody></tbody></table><div id=\"preview\" class=\"panel\"><p><em>Selectionnez une transaction</em></p></div></div><footer><div class=\"row\"><div class=\"text-center columns\"><a id=\"tour\" href=\"#\" class=\"radius button\">Visite guidée</a></div><!--<Reveal>Modals begin</Reveal>--><div id=\"step1\" data-reveal=\"data-reveal\" class=\"reveal-modal\"></div><div id=\"step2\" data-reveal=\"data-reveal\" class=\"reveal-modal\"><form data-abide=\"data-abide\"><h2>Etape 2 : Compléter les données récoltées</h2><p>Ajoutez des informations ou éditez celles collectées</p><div id=\"title\"><label>Titre:</label><input type=\"text\" name=\"title\" required=\"required\"/></div><div id=\"barcode\"><label>Code barre:</label><input type=\"text\" name=\"barcode\" required pattern=\"number\"/></div><div id=\"comment\"><label>Comment: (optionel)</label><textarea name=\"comment\"></textarea></div><div id=\"url\"><label>Url: (optionel)</label><input type=\"text\" name=\"url\" pattern=\"url\"/></div><a href=\"#\" id=\"add-transaction\" type=\"submit\" class=\"success radius button right\">Valider la nouvelle transaction</a><a href=\"#\" data-reveal-id=\"step1\" type=\"submit\" id=\"prev\" class=\"radius button\">Retour à l\\'étape 1</a></form><a class=\"close-reveal-modal\">×</a></div><!--<Reveal>Modals end</Reveal>--></div></footer><div id=\"loadbg\" class=\"loading\"></div><div class=\"row loading\"><div class=\"large-offset-5 large-2 small-offset-5 small-2\"><div id=\"circleG\"><div id=\"circleG_1\" class=\"circleG\"></div><div id=\"circleG_2\" class=\"circleG\"></div><div id=\"circleG_3\" class=\"circleG\"></div></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<h2>Etape 1 : Attacher des preuves d\\'achat</h2><p>Choisissez les données relatives à l\\'objet que vous souhaitez ajouter à votre inventaire</p><form><div id=\"sources\" class=\"fields\"><label class=\"superlab\">Source</label><select id=\"source\" name=\"source\"><option value=\"null\">* Choisissez une source d\\'information *</option><option value=\"intermarche\">Intermarché</option><option value=\"manuel\">Ajout manuel</option></select></div><div id=\"receipts\" class=\"fields\"><label class=\"superlab\">Tickets de caisse</label><select id=\"receipt\" name=\"receipt\" class=\"dynOption\"><option value=\"null\">* Choisissez un ticket de caisse *</option></select></div><div id=\"receiptelements\" class=\"fields\"><label class=\"superlab\">Détails du ticket<select id=\"receipt_details\" name=\"receipt_details\" class=\"dynOption\"><option value=\"null\">* Choisissez une ligne du ticket *</option></select></label></div><div id=\"detailspreview\" class=\"panel\"></div><div id=\"additionaldata\" class=\"panel\"></div></form><div id=\"manualbarcode\"><span>ou entrer le code bar manuellement<input placeholder=\"barcode\"/></span></div><a href=\"#\" data-reveal-id=\"step2\" type=\"submit\" id=\"next\" class=\"success radius button right\">Etape 2...</a><a class=\"close-reveal-modal\">×</a>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"row\"><div class=\"large-4 small-12 columns\"><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Nom de l\\'article</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof name !== \"undefined\")\n{\nvar __val__ = name\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Quantité</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof amount !== \"undefined\")\n{\nvar __val__ = amount\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Prix</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof price !== \"undefined\")\n{\nvar __val__ = price + \" €\"\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Quantité</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof quantityLabel !== \"undefined\")\n{\nvar __val__ = quantityLabel\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Code Barre</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof barcode !== \"undefined\")\n{\nvar __val__ = barcode\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Label</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof label !== \"undefined\")\n{\nvar __val__ = label\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Section</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof sectionLabel !== \"undefined\")\n{\nvar __val__ = sectionLabel\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Identifiant du magasin</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof intermarcheShopId !== \"undefined\")\n{\nvar __val__ = intermarcheShopId\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div><div class=\"row\"><div class=\"large-6 small-12 columns\"><span><strong>Date</strong></span></div><div class=\"large-6 small-12 columns\"><span>');\nif ( typeof timestamp !== \"undefined\")\n{\nvar __val__ = prettyDate(timestamp)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\n}\nbuf.push('</span></div></div></div><div class=\"large-4 small-12 columns\">');\nif ( barcode.lenght = 13)\n{\nbuf.push('<img');\nbuf.push(attrs({ 'src':('http://drive.intermarche.com/ressources/images/produit/zoom/0' + (barcode) + '.jpg'), 'alt':('' + (name) + ''), 'id':('preview_image') }, {\"src\":true,\"alt\":true,\"id\":true}));\nbuf.push('/>');\n}\nbuf.push('</div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<td><a');\nbuf.push(attrs({ 'href':(\"transaction#show/\" + (transaction.id) + \"\") }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = transaction.title\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></td><td><span>');\nvar __val__ = transaction.category\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span><br/><span>');\nvar __val__ = transaction.subcategory\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span><br/><span>');\nvar __val__ = transaction.subsubcategory\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span><br/></td><td><span>');\nvar __val__ = transaction.barcode\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></td><td><span>');\nvar __val__ = transaction.url\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></td><td></td><td><span>');\nvar __val__ = transaction.comment\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></td><td><a class=\"edit\">Editer /</a><a class=\"delete\">Supprimer /</a><a href=\"#\" data-dropdown=\"drop1\" class=\"dropdown\">Dropdown Button<i class=\"fa fa-caret-down\"></i><ul id=\"drop1\" data-dropdown-content=\"data-dropdown-content\" class=\"f-dropdown\"><li><a class=\"delete\">Supprimer</a><li><a href=\"#\">This is another</a><li><a href=\"#\">Yet another</a></li></li></li></ul></a></td>');\n}\nreturn buf.join(\"\");\n};","TransactionView = require(\"./transaction\")\nStep1 = require(\"./modal_step1\")\nmodule.exports = AppView = Backbone.View.extend(\n  el: \"body\"\n  template: require(\"../templates/app\")\n  events:\n    \"click #add-transaction\": \"createTransaction\"\n\n\n  # initialize is automatically called once after the view is contructed\n  initialize: ->\n    @listenTo @collection, \"add\", @onTransactionAdded\n\n  render: ->\n\n    # we render the template\n    @$el.html @template()\n    step1 = new Step1()\n    step1.render()\n\n    # fetch the transactions from the database\n    @collection.fetch()\n\n    # this.collection.seed()\n    appjs = this\n    $(document).on \"opened\", \"[data-reveal]\", ->\n      appjs.fillFields()\n\n\n  createTransaction: (event) ->\n\n    # submit button reload the page, we don't want that\n    event.preventDefault()\n\n    # add it to the collection\n    @collection.create\n      title: @$el.find(\"input[name=\\\"title\\\"]\").val()\n      comment: @$el.find(\"textarea[name=\\\"comment\\\"]\").val()\n\n      # trace: {\n\n      #         this.$el.find('select[name=\"proof_source\"]').val()\n      #         // window.local.selectedItem.origin\n      #     ],\n      # }\n      category: @$el.find(\"select[name=\\\"cat\\\"]\").val()\n      subcategory: @$el.find(\"select[name=\\\"subcat\\\"]\").val()\n      subsubcategory: @$el.find(\"select[name=\\\"subsubcat\\\"]\").val()\n      barcode: @$el.find(\"input[name=\\\"barcode\\\"]\").val() || local.selectedItem.barcode,\n      url: @$el.find(\"input[name=\\\"url\\\"]\").val()\n\n    $(\"#step2\").foundation \"reveal\", \"close\"\n\n\n  # updateTransaction: function(event) {\n  #     var that = this\n  #     this.model.save({\n  #         barcode: this.$el.find('input[name=\"barcode\"]').val() // ou qqch comme ça\n  #     },\n  #     // alternative: ajouter un change listner qui rerender le bouzin\n  #     {\n  #         success: function(){\n  #             that.render()\n  #         },\n  #         error: function(){\n  #             console.log('doh!')\n  #         }\n  #     })\n  # },\n  onTransactionAdded: (transaction) ->\n\n    # render the specific element\n    transactionView = new TransactionView(model: transaction)\n    transactionView.render()\n    @$el.find(\"tbody\").append transactionView.$el\n\n  fillFields: ->\n\n    # BARCODE\n    if local.selectedItem and local.selectedItem.barcode\n      $(\"#barcode input\").remove()\n      $(\"#barcode\").append local.selectedItem.barcode\n\n    # $.getJSON()\n    $(\"#title input\").val local.selectedItem.name  if local.selectedItem and local.selectedItem.name\n)","ReceiptDetailsCollection = require(\"../collections/receiptdetails\")\nSectionCollection = require(\"../collections/sections\")\nReceiptDetailsCollection = require(\"../collections/receiptdetails\")\nReceiptsCollection = require(\"../collections/receipts\")\nPreview = require(\"./preview\")\n\nmodule.exports = ReceiptDetail = Backbone.View.extend(\n  el: \"#step1\"\n  template: require(\"../templates/modal_step1\")\n  events:\n    \"change #source\": \"getProofOptions\"\n    \"change #receipt\": \"getReceiptSections\"\n    \"change #receiptelements\": \"updateDetailsPreview\"\n\n  render: ->\n    @$el.html @template({})\n    $(\"#sources\").fadeIn 1000\n    return\n\n  getProofOptions: ->\n    $(\"#receiptelements\").hide()\n    $(\"#receipts\").hide()\n    $(\"#detailspreview\").hide()\n    reinitilizeLocalValues()\n    switch $(\"#source\").val()\n      when \"intermarche\"\n        $(\"#receipts\").fadeIn 1500\n        @receiptsCollection = new ReceiptsCollection\n        @receiptsCollection.fetch()\n        $('.loading').fadeIn()\n        @listenTo @receiptsCollection, \"add\", @onReceiptsAdded\n      when \"manuel\"\n        $(\"#next\").trigger \"click\"\n\n\n  # SPECIFIQUE INTERMARCHE\n  onReceiptsAdded: (model) ->\n    opt = $(\"<option>\").val(model.get(\"receiptId\")).text(prettyDate(model.get(\"timestamp\")) + \" - \" + model.get(\"articlesCount\") + \" articles\")\n    @$(\"#receipts select\").append opt\n    $('.loading').fadeOut()\n\n  getReceiptSections: ->\n    $(\"#receiptelements option\").remove()\n    $(\"#detailspreview\").hide().html \"\"\n    @selectedReceiptId = $(\"#receipt\").val()\n    @sectionCollection = new SectionCollection([],\n      receiptId: @selectedReceiptId\n    )\n    @sectionCollection.fetch()\n    $('.loading').fadeIn()\n    @listenTo @sectionCollection, \"add\", @onReceiptSections\n    window.local.selectedTicket = {}\n\n  onReceiptSections: (model) ->\n    $ \"#receiptelements\"\n    $(\"#receiptelements\").fadeIn 1500\n    $(\"#receiptelements div\").fadeIn 1500\n    opt = $(\"<option>\").val(model.id).text((model.get(\"sectionLabel\").upAndDownCase()) + \" - \" + model.get(\"name\") + \" - \" + model.get(\"price\") + \"€\")\n    @$(\"#receiptelements select\").append opt\n    window.local.selectedTicket[model.id] = model.attributes\n    listToReorder $(\"#receiptelements select\"), $(\"#receiptelements select\").children(\"option\").get()\n    $('.loading').fadeOut()\n\n  updateDetailsPreview: ->\n    $(\"#detailspreview\").hide().html \"\"\n    window.local.selectedItemId = $(\"#receiptelements select\").val()\n    window.local.selectedItem = window.local.selectedTicket[window.local.selectedItemId]\n    window.local.selectedItem\n    preview = new Preview(model: window.local.selectedItem)\n    preview.render()\n    $(\"#detailspreview\").fadeIn 500\n    $(\"#detailspreview div\").fadeIn 500\n)\n\n# $('#preview_image').error(this.$('#preview_image').hide())\n","module.exports = ReceiptDetailPreview = Backbone.View.extend(\n  el: \"div\"\n  template: require(\"../templates/preview\")\n  \n  # events: {\n  # 'change #proof_source': 'getProofOptions',\n  # 'change #receipt': 'getReceiptSections',\n  # 'change #receiptelements': 'updateDetailsPreview'\n  # },\n  render: ->\n    $(\"#detailspreview\").html @template(@model)\n    this\n)\n","module.exports = Transaction = Backbone.View.extend(\n  tagName: \"tr\"\n  template: require(\"../templates/transaction\")\n  events:\n    \"click a.delete\": \"deleteTransaction\"\n    \"click a.edit\": \"editTransaction\"\n\n  render: ->\n    @$el.html @template(transaction: @model.toJSON())\n    return\n\n  deleteTransaction: ->\n    @model.destroy()\n    @remove()\n    return\n\n  editTransaction: ->\n    alert \"fonctionnalité à venir\"\n    return\n)\n"]}